# Зависимости проекта

- Spring Boot: основной фреймворк для создания и развертывания приложения.
- Spring Data JPA: для работы с базой данных через Hibernate.
- PostgreSQL Driver: драйвер для работы с PostgreSQL базой данных.
- Lombok: упрощает разработку, добавляя аннотации для генерации кода (геттеры, сеттеры, конструкторы).
- Spring Web: для создания веб-приложения и контроллеров.
- Hibernate Validator: для валидации данных.

## Порядок запуска проекта

### Шаг 1
- Установить [JDK](https://www.oracle.com/cis/java/technologies/downloads/) (Java Development Kit) версии 17 или выше.
- Установить [Maven](https://maven.apache.org/download.cgi).

### Шаг 2
- Установить PostgreSQL.
```
brew install postgresql@15
```
Или по [ссылке](https://www.postgresql.org/download/macosx/)

- Создать базу данных для проекта .

```sql
CREATE DATABASE traineejava;
```
### Шаг 3
- Включить зависимости: Spring Web, Spring Data JPA, PostgreSQL Driver, Lombok, Hibernate Validator.
- Импортировать проект в вашу IDE (например, IntelliJ IDEA).

### Шаг 4

- Настроить подключение базы данных к проекту в файлe '_application.properties_' .

```java
spring.application.name=TraineeJava  
  
server.port=8085  
  
spring.datasource.url=jdbc:postgresql://localhost:5432/traineejava  
spring.datasource.username=postgres  
  
spring.datasource.driver-class-name=org.postgresql.Driver  
spring.jpa.database=postgresql  
spring.jpa.hibernate.ddl-auto=update  
  
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect  
  
spring.mvc.view.prefix=/templates/  
spring.mvc.view.suffix=.html  
  
  
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
```

### Шаг 5

- Проверить подключение БД к проекту DataBase -> Properties -> Test Connection

Если Succeeded, значит БД подключена правильно.![](https://github.com/Sanyajo/PropertyRental-TraineeJava-/blob/main/ImgForReadme/DataBaseConnectedTest.png)

### Шаг 6

- Создание таблиц в БД (Используется связь " Один к многим")
-  Таблица "landlord" хранит информацию об арендодателях
```sql
CREATE TABLE IF NOT EXISTS public.landlord
(
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    email character varying(255) COLLATE pg_catalog."default" NOT NULL,
    first_name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    last_name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    password character varying(255) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT landlord_pkey PRIMARY KEY (id),
    CONSTRAINT uk5y5jmd99r4204f83jtpacqy6j UNIQUE (email)
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.landlord
    OWNER to postgres;
```
- Таблица "property" хранит информацию о недвижимости
 ```sql
 CREATE TABLE IF NOT EXISTS public.property
(
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    address character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description character varying(255) COLLATE pg_catalog."default" NOT NULL,
    property_type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL,
    landlord_id bigint,
    CONSTRAINT property_pkey PRIMARY KEY (id),
    CONSTRAINT fktd2l9ro84bu0ivjitnkmolqmp FOREIGN KEY (landlord_id)
        REFERENCES public.landlord (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.property
    OWNER to postgres;
 ```

- ![Схема таблиц базы данных](https://github.com/Sanyajo/PropertyRental-TraineeJava-/blob/main/ImgForReadme/DatabaseDependencies.png) 


### Шаг 7 (Проверка БД)

- Добавление записи в бд (Используем Postman)
```
http://localhost:8085/api/landlord/create
```
```json
{

"firstName":  "Sakhatskiy",

"lastName":  "Aleksandr",

"email":  "sakhatskiy2016@mail.ru",

"password":  "aezakmi"
}
```

Получаем на выходе:
```json
{

"id":  30,

"firstName":  "Sakhatskiy",

"lastName":  "Aleksandr",

"email":  "sakhatskiy2016@mail.ru",

"password":  "$2a$10$kJ4fDNk7me86UwXOAkGNSu6QYakGVZjAFGXB/tofEa4eyZvPXOo/S"

}
```

- Выведем информацию об этом арендодателе (Используем Postman)
```
http://localhost:8085/api/landlord/get/30
```

Получим:
```json
{

"id":  30,

"firstName":  "Sakhatskiy",

"lastName":  "Aleksandr",

"email":  "sakhatskiy2016@mail.ru",

"password":  "$2a$10$kJ4fDNk7me86UwXOAkGNSu6QYakGVZjAFGXB/tofEa4eyZvPXOo/S"

}
```

Если все шаги выполнены успешно, то проект  настроен и функционирует корректно. 
